version: '3.8'

services:
  coding-agent:
    build: .
    environment:
      - GH_PAT=${GH_PAT}
      - DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
    volumes:
      - .:/app
    working_dir: /app
    command: tail -f /dev/null
    
  test-run:
    build: .
    environment:
      - GH_PAT=${GH_PAT}
      - DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
    volumes:
      - .:/app
    working_dir: /app
    command: python coding_agent.py --issue 1 --repo ${GITHUB_REPO} --test
